\section{Customize distance function}

\ewu{mention goal is to minimie the objective unction}
% talked about moving the t.A_j = CONSTANT constraints for non-complaints
% into obj functino as |t.A_j - CONSTANT|, however makes problems slower
% so only use soft constraints during second iteration.

The distance function $d(\mathcal{Q}, \mathcal{Q}^*)$ 
in Definition~\ref{def:problem} is customizable 
in different scenarios w.r.t the property of the query log and its
impact over the database. 
When the query log only involves numeric attributes, one option for 
the distance function is the Manhattan distance between parameters in 
the query log $\mathcal{Q}$ and the log repair $\mathcal{Q}^*$; 
alternatively, it could be the number of 
parameters that are different with the original ones. The
impact of the log repair $\mathcal{Q}^*$ can also be involved 
in the distance function: one would prefer that $\mathcal{Q}^*$
modifies as few tuples as possible, in which case the distance 
function could be the number of tuples that modified by the log repair.
By allowing this custmizable distance function, we increase the flexibility 
of our system. \\
In this paper, we use Manhattan distance between parameters 
in the query log as our objective function: 
\[d(\mathcal{Q}, \mathcal{Q}^*) = \sum\limits_{\substack{ q_i \in \mathcal{Q}\\ q_i^* \in \mathcal{Q}^*}}  
\sum\limits_{\substack{para_j \in q_i\\ para_j^* \in q_i^*}}|para_j - para_j^*|\]
OR
\[d(\mathcal{Q}, \mathcal{Q}^*) = \sum_{i = 1} ^{n} \sum_{j = 1}^{|q_i.para|} |q_i.para_j - q_i.para_j^*|\]
\xlw{$q_i.para_j$ is not defined in previous section, should we include them in Definition for query in 
Section~\ref{sec:model}?}