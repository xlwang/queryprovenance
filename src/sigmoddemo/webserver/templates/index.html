<html>

  <head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.5/handlebars.min.js"></script>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">

    <script src="/static/util.js" ></script>
    <style>
      body {
        margin-top: 2em;
      }
      tr.complaint td {
        color: red;
        font-weight: bold;
      }

      #querytext {
        width: 100%;
        height: 200px;
        padding: 1em;
        font-size: 15pt;

      }
      #querylog{
        height: 200px;
        overflow-y: scroll;
        width: 100%;
        border: 1px solid grey;
      }
      #querylog li {
        width: 100%;
        padding: 1em;
        white-space: initial;
        text-align: left;
      }
      #querylog li pre {
        cursor: pointer;
      }
      #querylog li:hover pre{
        background: #fffffe;
      }
      #datatable {
        height: 300px;
        overflow-y: scroll;
        width: 100%;
      }
      #run-btn {
        margin-top: 2em;
        width: 100%;
      }
    </style>
  </head>

<body class="container">
  <h1 style="margin-bottom: 1ex">QFix Sigmod 2016 Demo</h1>

  <div class="row">
    <div class="col-md-2"></div>
    <div class="col-md-4">
      <div id="querylog-container"></div>
    </div>
    <div class="col-md-6">
      <textarea id="querytext"></textarea>
    </div>
  </div>

  <div class="row">
    <div class="col-md-12">
      <div id="datatable-container">
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-md-12" style="text-align: center">
      <button id="run-btn" class="btn btn-primary">Run QueryFix</button>
    </div>
  </div>


  <div id="result-view" style="display: none">
    <div class="row" style="margin-top: 3em">
      <div class="col-md-12" style="text-align: center">
        <div class="jumbotron">
          <pre id="err_q"></pre>
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col-md-6">
        <h2>QFix</h2>
        <pre id="qfix_q">  </pre>
      </div>
      <div class="col-md-6">
        <h2>Decision Tree</h2>
        <pre id="alt_q"> </pre>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-md-6">
      <div id="qfix-data-container"></div>
    </div>
    <div class="col-md-6">
      <div id="alt-data-container"></div>
    </div>
  </div>

</body>
</html>

{% raw %}

<script id="table-template" type="text/x-handlebars-template">
  <table class="table table-striped">
    <tbody>
      <tr>
        {{#each header}}<th>{{this}}</th>{{/each}}
      </tr>
      {{#each rows}}
        <tr class="{{#if iscomplaint}}complaint{{/if}}">
          {{#each data}}<td>{{this}}</td>{{/each}}
        </tr>
      {{/each}}
    </tbody>
  </table>
</script>


<script id="querylog-template" type="text/x-handlebars-template">
  <ul id="querylog" class="list-unstyled">
    {{#each queries}}
    <li id="q-{{id}}"><!-- class="btn btn-link">-->
      <pre>{{query}}</pre>
    </li>
    {{/each}}
  </ul>
</script>

{% endraw %}





<script>
  $(function() {
    app.loadWorkload('default')
    $("#run-btn").click(app.submitPressed.bind(app));
  });
</script>


