<html>

  <head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.5/handlebars.min.js"></script>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">

    <script src="/static/util.js" ></script>
    <style>
      body {
        margin-top: 2em;
      }

      #querytext {
        width: 100%;
        height: 200px;
        padding: 1em;
        font-size: 15pt;

      }
      #querylog{
        height: 200px;
        overflow-y: scroll;
        width: 100%;
        border: 1px solid grey;
      }
      #querylog li {
        width: 100%;
        padding: 1em;
        cursor: pointer;
        white-space: initial;
        text-align: left;
      }
      #datatable {
        height: 300px;
        overflow-y: scroll;
        width: 100%;
      }
      #run-btn {
        margin-top: 2em;
        width: 100%;
      }
    </style>
  </head>

<body class="container">
  <h2 style="margin-bottom: 1ex">QFix Sigmod 2016 Demo</h2>


  <div class="row">
    <div class="col-md-2"></div>
    <div class="col-md-3">
      <div id="querylog-container"></div>
    </div>
    <div class="col-md-4">
      <textarea id="querytext"></textarea>
    </div>
  </div>

  <div class="row">
    <div class="col-md-10">
      <div id="datatable">
        <table  class="table table-striped">
          <tbody>
            <tr>
              {% for col in header %}<th>{{col}}</th>{% endfor %}
            </tr>
            {% for row in table %}
              <tr>
                {% for col in row.data %}<td>{{col}}</td>{% endfor %}
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-md-10">
      <button id="run-btn" class="btn btn-primary">Run QueryFix</button>
    </div>
  </div>


</body>

<script>
  $(function() {
    var queries = [
    {% for q in queries %}
      {
        query: "{{q.query|safe}}",
        id: {{q.id}}
      }
      {% if not loop.last %}, {% endif %}
    {% endfor %}
    ];
    renderQueryLog({
      queries: queries
    });

    
  });
</script>

</html>

{% raw %}


<script id="querylog-template" type="text/x-handlebars-template">
  <ul id="querylog" class="list-unstyled">
    {{#each queries}}
    <li id="q-{{id}}" class="btn btn-link">
      {{query}}
    </li>
    {{/each}}
  </ul>
</script>

{% endraw %}
